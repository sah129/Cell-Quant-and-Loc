
```{r}
source('src/functions.R')
datasetpath <- "Datasets/Figure 4A/WT"
```
Figure 1B: sigma = .3, offset= 0.002, cutoff = 50

"C:\Users\Sarah's Computer\Desktop\Git1 Quant\Sarah\Results No Settings-NewVac\Figure 2C\Images\aly2-del_415Git1_003_final_results.tiff"

```{r, echo = FALSE}
imageset <- read_in_imageset_files(datasetpath)
channels <- read_in_channels(imageset[1,], datasetpath)
img_gray <- convert_to_grayscale(channels)
membranes <- detect_membranes_git1(img_gray, channels)
vacuoles <- find_vacuoles(membranes, img_gray, channels)
```

```{r}
res <- exclude_and_bind(membranes, vacuoles)
final<-tidy_up(membranes,vacuoles,res)
```
```{r}

display(normalize(img_gray)[,,gfp_channel])
```

```{r}
display(img_gray[,,gfp_channel])
```

```{r}
res$df
```



```{r}
display(res$membranes)
```






```{r}
get_display_img(df = final$df,
                membranes = final$membranes, 
                col_membranes = 'white', 
                vacuoles = final$vacuoles, 
                col_vacuoles ='blue', 
                removed = membranes$removed,
                closed_vacuoles = TRUE, 
                img = toRGB(channels$gfp), 
                showRemoved = FALSE, 
                showMemLabels = TRUE, 
                showVacLabels = FALSE)
```


```{r}
m1 <- final$membranes == 31
m2<- final$membranes == 24
v1<-final$vacuoles==38
v2<-final$vacuoles==30
```







```{r}
cells_blurred = gblur(img_gray[,,gfp_channel], sigma = .5)
ct = thresh(cells_blurred, offset = 0.002)

cm = bwlabel(ct)
FS = computeFeatures.shape(cm)
sel <- which(FS[,"s.area"] < 600)
membranes <-rmObjects(cm, sel)
display(membranes)
```















